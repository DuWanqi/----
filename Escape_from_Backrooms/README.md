# 🏚️ 逃离后室：山屋惊魂

一款基于 Three.js 的俯视角 3D 生存探索恐怖游戏，融合了"后室"的阈限空间恐怖与"山屋惊魂"的微恐解谜核心体验。

## 🎮 游戏特色

- **俯视角 3D 视角** - 沉浸式探索体验
- **随机房间生成** - 穿过门自动生成新房间，每局体验不同
- **AI 队友系统** - 支持 Google Gemini API 或固定对话模式
- **精神值管理** - 资源稀缺，需要谨慎探索
- **多种实体威胁** - 笑魇、窃皮者、影怪等后室经典实体
- **多结局系统** - 根据行为触发不同结局

## 🚀 快速开始

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 生产构建
npm run build
```

## 🎹 游戏控制

| 按键 | 功能 |
|------|------|
| **WASD / 方向键** | 移动 |
| **Shift** | 奔跑（增加噪音） |
| **E** | 开关煤油灯 |
| **I** | 打开/关闭背包 |
| **空格** | 拾取道具 |
| **F** | 与队友互动 |
| **ESC** | 暂停菜单 |
按 ~ 键 可以在屏幕右下角显示/隐藏日志面板

## 🗂️ 项目结构

```
src/
├── main.ts                 # 入口文件
├── game/
│   ├── types.ts           # 类型定义和常量
│   ├── RoomGenerator.ts   # 房间生成系统
│   └── MainScene.ts       # 主游戏场景
├── entities/
│   ├── Player.ts          # 玩家实体
│   ├── Companion.ts       # AI队友
│   └── Entity.ts          # 实体系统（敌人）
├── systems/
│   └── AIService.ts       # AI对话服务
├── ui/
│   └── GameUI.ts          # 游戏UI系统
└── platform/
    └── Bridge.ts          # 平台通信
```

## 🎯 游戏机制

### 房间类型
- **基础格子 (70%)** - 黄墙纸走廊、废弃客房
- **危险格子 (20%)** - 管道间、存在敌对实体
- **枢纽格子 (5%)** - 蓝色荧光走廊，可层级跳转
- **隐秘格子 (5%)** - 镜像房间、派对厅

### 实体威胁
- **笑魇** - 保持安静即可规避
- **窃皮者** - 用钥匙攻击头部可击退
- **影怪** - 光源可驱散
- **派对客** - 不要触碰糖果

### AI 队友
选择三种不同性格的队友：
- 🔮 **艾琳（通灵者）** - 神秘、直觉敏锐
- 🧭 **马克（探险家）** - 勇敢、务实、冷静
- 📚 **李博士（历史学家）** - 学识渊博、谨慎

## ⚙️ AI 对话配置

游戏支持两种对话模式：

1. **固定模式**（默认）- 无需配置，使用预设对话库
2. **AI 模式** - 在设置中输入 Google Gemini API Key

获取 API Key: [Google AI Studio](https://aistudio.google.com/)

## 🎨 技术栈

- **Three.js** - 3D WebGL 渲染
- **TypeScript** - 类型安全开发
- **Vite** - 快速开发服务器

## 📜 世界观

山屋是后室的 Level 5（废弃酒店层级），19世纪因家族崇拜外神意外打通后室通道，成为现实与后室的夹缝空间。玩家与 AI 同伴误入山屋后，需在"空间循环、实体威胁、资源稀缺"的压迫下探索逃离。

## 📄 License

MIT

---

**Created with VAG - Vibe AI Game Engine** 🎮
